import * as React from "react";
import { fireEvent, render, screen, waitFor } from "@testing-library/react";
import ContextProvider, { AppContext } from "lib/context";
import RightSideDetail from "./index";

test("right side details page with props", async () => {
  const fetchingReviews = jest.fn();
  const setIsRatingError = jest.fn();
  const setIsloading = jest.fn();

  const productData = {
    Size: 1,
    Color: "red",
    sku: "21046110629-ksa",
    itemId: ["300"],
    hasStock: true,
  };

  render(
    <ContextProvider>
      <RightSideDetail
        totalRating={0}
        productData={[productData]}
        fetchingReviews={fetchingReviews}
        setIsRatingError={setIsRatingError}
        isRatingError={""}
        priceListId={"10000"}
        setIsloading={setIsloading}
      />
    </ContextProvider>
  );

  screen.getByText(/%/i)

  // fireEvent.click(await screen.findByText(/Add To Cart/i));
});

test("right side details page empty props", () => {
  const fetchingReviews = jest.fn();
  const setIsRatingError = jest.fn();
  const setIsloading = jest.fn();

  render(
    <ContextProvider>
      <RightSideDetail
        totalRating={0}
        productData={[]}
        fetchingReviews={fetchingReviews}
        setIsRatingError={setIsRatingError}
        isRatingError={""}
        priceListId={"10000"}
        setIsloading={setIsloading}
      />
    </ContextProvider>
  );
});

test("right side details page arabic props", () => {
  const fetchingReviews = jest.fn();
  const setIsRatingError = jest.fn();
  const setIsloading = jest.fn();

  const productData = {
    Size: 1,
    Color: "red",
    sku: "21046110629-ksa",
    itemId: 246,
    hasStock: true,
  };

  render(
    <AppContext.Provider value={{ appState: { lang: "ar" } }}>
      <RightSideDetail
        totalRating={0}
        productData={[productData]}
        fetchingReviews={fetchingReviews}
        setIsRatingError={setIsRatingError}
        isRatingError={""}
        priceListId={"10000"}
        setIsloading={setIsloading}
      />
    </AppContext.Provider>
  );
});
